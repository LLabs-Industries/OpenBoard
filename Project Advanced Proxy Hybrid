// Coded in C++ by Lorenzo J Munguia

#include <LiquidCrystal.h>
#include <Adafruit_LiquidCrystal.h>

// ------------------------------------------------------
// LCD Objects
// ------------------------------------------------------
LiquidCrystal lcd_parallel(7, 12, 11, 10, 9, 8);  // Parallel LCD
Adafruit_LiquidCrystal lcd_i2c(0);                // I2C LCD

// ------------------------------------------------------
// Hardware Pins
// ------------------------------------------------------
const int sensorPin = 2;
const int ledPin = 13;
const int exled = 3;
const int exspeak = 4;
const int exled2 = 5;

void setup() {
  pinMode(sensorPin, INPUT);
  pinMode(ledPin, OUTPUT);
  pinMode(exled, OUTPUT);
  pinMode(exspeak, OUTPUT);
  pinMode(exled2, OUTPUT);

  Serial.begin(9600);
  Serial.println("IR Proximity Sensor Initialized");

  // Initialize both LCDs
  lcd_parallel.begin(16, 2);
  lcd_i2c.begin(16, 2);

  // Splash screens
  lcd_parallel.print("LLabs Industries");
  lcd_i2c.print("LLabs Industries");
  lcd_parallel.setCursor(0,1);
  lcd_i2c.setCursor(0,1);
  lcd_parallel.print("Est 2011");
  lcd_i2c.print("Est 2011");
  delay(1000);

  lcd_parallel.clear();
  lcd_i2c.clear();
  lcd_parallel.print("PBC Engineering");
  lcd_i2c.print("PBC Engineering");
  lcd_parallel.setCursor(0,1);
  lcd_i2c.setCursor(0,1);
  lcd_parallel.print("Est 2003");
  lcd_i2c.print("Est 2003");
  delay(1000);

  lcd_parallel.clear();
  lcd_i2c.clear();
  lcd_parallel.print("By Mr");
  lcd_i2c.print("By Mr");
  lcd_parallel.setCursor(0,1);
  lcd_i2c.setCursor(0,1);
  lcd_parallel.print("Bluesky");
  lcd_i2c.print("Bluesky");
  delay(1000);

  lcd_parallel.clear();
  lcd_i2c.clear();
}

void loop() {
  static int lastProximity = -1;
  int proximity = digitalRead(sensorPin);

  if (proximity != lastProximity) {
    lcd_parallel.clear();
    lcd_i2c.clear();

    if (proximity == HIGH) {
      digitalWrite(ledPin, HIGH);
      digitalWrite(exled2, LOW);
      digitalWrite(exled, HIGH);
      digitalWrite(exspeak, HIGH);
      Serial.println("Motion Detected");

      lcd_parallel.print("Motion Detected");
      lcd_i2c.print("Motion Detected");

    } else {
      digitalWrite(ledPin, LOW);
      digitalWrite(exled2, HIGH);
      digitalWrite(exled, LOW);
      digitalWrite(exspeak, LOW);
      Serial.println("No Motion");

      lcd_parallel.print("No Motion");
      lcd_i2c.print("No Motion");
    }

    lastProximity = proximity;
  }

  delay(1);
}
